<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Place Order - SWISTO Hotel Portal</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .ordering-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 2.5rem;
            margin: 2rem 0;
        }

        /* Search and Filter Section */
        .search-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: #F8FAFC;
            border-radius: 10px;
        }

        .search-box {
            position: relative;
            margin-bottom: 1rem;
        }

        .search-box input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            border: 1px solid #D1D5DB;
            border-radius: 8px;
            font-size: 1rem;
        }

        .search-box i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #64748B;
        }

        .quick-filters {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .filter-tag {
            background: white;
            border: 1px solid #D1D5DB;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .filter-tag:hover {
            border-color: var(--primary);
        }

        .filter-tag.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Supplier Grid */
        .suppliers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .supplier-card {
            background: white;
            border: 2px solid #E2E8F0;
            border-radius: 10px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .supplier-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .supplier-card.selected {
            border-color: var(--primary);
            background: #FEF2F2;
        }

        .supplier-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--secondary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .supplier-badge.premium {
            background: var(--accent);
        }

        .supplier-header {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .supplier-avatar {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .supplier-info {
            flex: 1;
        }

        .supplier-info h4 {
            margin: 0 0 0.25rem 0;
            color: #1E293B;
        }

        .supplier-rating {
            color: var(--accent);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .supplier-specialties {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .specialty-tag {
            background: #EFF6FF;
            color: #1E40AF;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.75rem;
        }

        .supplier-stats {
            display: flex;
            justify-content: space-between;
            color: #64748B;
            font-size: 0.85rem;
        }

        /* Products Section */
        .products-section {
            display: none;
        }

        .products-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1.5rem;
            gap: 1rem;
        }

        .products-search {
            flex: 1;
            position: relative;
        }

        .products-search input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 1px solid #D1D5DB;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .products-search i {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #64748B;
        }

        .category-filters {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .product-card {
            background: white;
            border: 1px solid #E2E8F0;
            border-radius: 10px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
        }

        .product-card:hover {
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .product-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--secondary);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .product-badge.low-stock {
            background: var(--accent);
        }

        .product-badge.out-of-stock {
            background: #ef4444;
        }

        .product-card h4 {
            margin: 0 0 0.5rem 0;
            color: #1E293B;
            font-size: 1rem;
        }

        .product-category {
            color: #64748B;
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .stock-info {
            color: #64748B;
            font-size: 0.8rem;
            margin-bottom: 1rem;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .quantity-btn {
            width: 32px;
            height: 32px;
            border: 1px solid #D1D5DB;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: #F8FAFC;
        }

        .quantity-input {
            width: 60px;
            text-align: center;
            padding: 0.5rem;
            border: 1px solid #D1D5DB;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .add-to-cart-btn {
            width: 100%;
            margin-top: 1rem;
        }

        /* Cart Summary */
        .cart-summary {
            background: #F8FAFC;
            padding: 2rem;
            border-radius: 10px;
            margin-top: 2rem;
            position: sticky;
            bottom: 2rem;
        }

        .cart-items {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 1.5rem;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #E2E8F0;
        }

        .cart-item-info h5 {
            margin: 0 0 0.25rem 0;
            color: #1E293B;
        }

        .cart-item-details {
            color: #64748B;
            font-size: 0.8rem;
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 0;
            font-size: 1.3rem;
            font-weight: bold;
            color: #1E293B;
            border-top: 2px solid #E2E8F0;
        }

        .quote-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        /* Empty States */
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #64748B;
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #9CA3AF;
        }

        @media print {
            .no-print {
                display: none !important;
            }
        }

        @media (max-width: 768px) {
            .suppliers-grid {
                grid-template-columns: 1fr;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .quote-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar no-print">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="swisto-logo.png" alt="SWISTO Kenya">
                <span style="margin-left: 10px; font-weight: 600; color: #333;">Hotel Portal</span>
            </div>
            <div class="nav-menu">
                <a href="hotel-dashboard.html" class="nav-link"><i class="fas fa-home"></i> Dashboard</a>
                <a href="hotel-ordering.html" class="nav-link active"><i class="fas fa-shopping-cart"></i> Place Order</a>
                <a href="hotel-orders.html" class="nav-link"><i class="fas fa-list"></i> My Orders</a>
                <a href="#suppliers" class="nav-link"><i class="fas fa-truck"></i> Suppliers</a>
            </div>
            <div class="nav-user">
                <span class="user-name">Serena Hotel</span>
                <div class="user-avatar" style="background: var(--primary); color: white;">
                    <i class="fas fa-hotel"></i>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <section class="dashboard-content" style="padding: 120px 0 80px; margin-top: 80px;">
        <div class="container">
            <div class="ordering-container">
                <div class="orders-header">
                    <div>
                        <h1 style="color: #1E293B; margin-bottom: 0.5rem;">Place Emergency Order</h1>
                        <p style="color: #64748B;">Find suppliers and items quickly with our search tools</p>
                    </div>
                </div>

                <!-- Search and Filter Section -->
                <div class="search-section">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="globalSearch" placeholder="Search suppliers, products, or categories..." onkeyup="handleGlobalSearch()">
                    </div>
                    
                    <div class="quick-filters">
                        <div class="filter-tag active" onclick="setQuickFilter('all')">All Suppliers</div>
                        <div class="filter-tag" onclick="setQuickFilter('toiletries')">Toiletries</div>
                        <div class="filter-tag" onclick="setQuickFilter('amenities')">Amenities</div>
                        <div class="filter-tag" onclick="setQuickFilter('linens')">Linens</div>
                        <div class="filter-tag" onclick="setQuickFilter('cleaning')">Cleaning</div>
                        <div class="filter-tag" onclick="setQuickFilter('premium')">Premium</div>
                        <div class="filter-tag" onclick="setQuickFilter('emergency')">Emergency Stock</div>
                    </div>
                </div>

                <!-- Suppliers Grid -->
                <div class="suppliers-grid" id="suppliersGrid">
                    <!-- Suppliers will be loaded dynamically -->
                </div>

                <!-- Products Section (Hidden until supplier selected) -->
                <div class="products-section" id="productsSection">
                    <div class="products-header">
                        <div>
                            <h3 style="color: #1E293B; margin-bottom: 0.5rem;" id="selectedSupplierName">Products</h3>
                            <p style="color: #64748B; margin: 0;" id="supplierSpecialties"></p>
                        </div>
                        <div class="products-search">
                            <i class="fas fa-search"></i>
                            <input type="text" id="productSearch" placeholder="Search products..." onkeyup="filterProducts()">
                        </div>
                    </div>

                    <!-- Category Filters -->
                    <div class="category-filters" id="categoryFilters">
                        <!-- Categories will be loaded dynamically -->
                    </div>

                    <!-- Products Grid -->
                    <div class="products-grid" id="productsGrid">
                        <!-- Products will be loaded dynamically -->
                    </div>

                    <!-- Cart Summary -->
                    <div class="cart-summary">
                        <h3 style="color: #1E293B; margin-bottom: 1rem;">Order Summary</h3>
                        <div class="cart-items" id="cartItems">
                            <!-- Cart items will be loaded here -->
                        </div>
                        <div class="cart-total">
                            <span>Total Amount:</span>
                            <span id="totalAmount">KES 0</span>
                        </div>

                        <div class="quote-actions no-print">
                            <button class="btn btn-outline" onclick="generateQuote()" id="generateQuoteBtn" disabled>
                                <i class="fas fa-file-pdf"></i> Generate Quote
                            </button>
                            <button class="btn btn-primary" onclick="placeOrder()" id="placeOrderBtn" disabled>
                                <i class="fas fa-paper-plane"></i> Place Order & Send PO
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Empty State -->
                <div id="emptyState" class="empty-state" style="display: none;">
                    <i class="fas fa-search"></i>
                    <h3>No Suppliers Found</h3>
                    <p>Try adjusting your search terms or filters</p>
                </div>

                <!-- Printable Quote Section -->
                <div id="printableQuote" style="display: none;">
                    <!-- This will be populated with the quote content -->
                </div>
            </div>
        </div>
    </section>

    <script>
        // Enhanced data structure
        const suppliers = {
            'nakuru': {
                id: 'nakuru',
                name: 'Nakuru Supplies Ltd',
                address: 'Nakuru Industrial Area, Nakuru',
                phone: '+254 700 000 000',
                email: 'orders@nakurusupplies.co.ke',
                rating: 4.8,
                reviews: 124,
                responseTime: '15 min',
                subscription: 'premium',
                specialties: ['toiletries', 'cleaning', 'emergency'],
                products: [
                    { id: 1, name: 'Toilet Paper (4-ply)', price: 2500, unit: 'carton', category: 'toiletries', stock: 150, minStock: 30 },
                    { id: 2, name: 'Bath Tissue (2-ply)', price: 1800, unit: 'carton', category: 'toiletries', stock: 45, minStock: 50 },
                    { id: 3, name: 'Guest Shampoo (200ml)', price: 350, unit: 'bottle', category: 'amenities', stock: 0, minStock: 100 },
                    { id: 4, name: 'Hand Soap Dispenser', price: 1200, unit: 'piece', category: 'amenities', stock: 25, minStock: 10 },
                    { id: 5, name: 'Bath Towels (Premium)', price: 850, unit: 'piece', category: 'linens', stock: 80, minStock: 20 },
                    { id: 6, name: 'Floor Cleaner (5L)', price: 1800, unit: 'bottle', category: 'cleaning', stock: 15, minStock: 5 },
                    { id: 7, name: 'Disposable Gloves', price: 2800, unit: 'box', category: 'cleaning', stock: 40, minStock: 15 }
                ]
            },
            'coastal': {
                id: 'coastal',
                name: 'Coastal Premium Supplies',
                address: 'Mombasa Road, Nairobi',
                phone: '+254 711 000 000',
                email: 'sales@coastalsupplies.co.ke',
                rating: 5.0,
                reviews: 89,
                responseTime: '10 min',
                subscription: 'premium',
                specialties: ['amenities', 'linens', 'premium'],
                products: [
                    { id: 8, name: 'Luxury Toilet Paper', price: 3200, unit: 'carton', category: 'toiletries', stock: 75, minStock: 20 },
                    { id: 9, name: 'Designer Bath Robes', price: 2800, unit: 'piece', category: 'linens', stock: 35, minStock: 10 },
                    { id: 10, name: 'Premium Shampoo Set', price: 650, unit: 'bottle', category: 'amenities', stock: 60, minStock: 25 },
                    { id: 11, name: 'Spa Quality Soap', price: 380, unit: 'piece', category: 'amenities', stock: 120, minStock: 30 },
                    { id: 12, name: 'Egyptian Cotton Towels', price: 1500, unit: 'piece', category: 'linens', stock: 45, minStock: 15 }
                ]
            },
            'nairobi': {
                id: 'nairobi',
                name: 'Nairobi General Supplies',
                address: 'Industrial Area, Nairobi',
                phone: '+254 722 000 000',
                email: 'info@nairobigeneral.co.ke',
                rating: 4.3,
                reviews: 67,
                responseTime: '25 min',
                subscription: 'basic',
                specialties: ['cleaning', 'toiletries', 'emergency'],
                products: [
                    { id: 13, name: 'Economy Toilet Paper', price: 1800, unit: 'carton', category: 'toiletries', stock: 200, minStock: 50 },
                    { id: 14, name: 'Bleach (5L)', price: 950, unit: 'bottle', category: 'cleaning', stock: 30, minStock: 10 },
                    { id: 15, name: 'Floor Polish', price: 2200, unit: 'bottle', category: 'cleaning', stock: 18, minStock: 5 },
                    { id: 16, name: 'Hand Sanitizer', price: 2800, unit: 'box', category: 'amenities', stock: 55, minStock: 20 }
                ]
            }
        };

        let selectedSupplier = null;
        let currentFilter = 'all';
        let cart = [];
        let allSuppliers = Object.values(suppliers);

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadSuppliers();
        });

        function loadSuppliers(filter = 'all') {
            const suppliersGrid = document.getElementById('suppliersGrid');
            const emptyState = document.getElementById('emptyState');
            
            let filteredSuppliers = allSuppliers;
            
            if (filter !== 'all') {
                filteredSuppliers = allSuppliers.filter(supplier => 
                    supplier.specialties.includes(filter)
                );
            }
            
            if (filteredSuppliers.length === 0) {
                suppliersGrid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }
            
            suppliersGrid.style.display = 'grid';
            emptyState.style.display = 'none';
            suppliersGrid.innerHTML = '';
            
            filteredSuppliers.forEach(supplier => {
                const supplierCard = document.createElement('div');
                supplierCard.className = 'supplier-card';
                supplierCard.onclick = () => selectSupplier(supplier.id);
                
                const specialtiesHTML = supplier.specialties.map(spec => 
                    `<span class="specialty-tag">${spec}</span>`
                ).join('');
                
                supplierCard.innerHTML = `
                    ${supplier.subscription === 'premium' ? '<div class="supplier-badge premium">PREMIUM</div>' : ''}
                    <div class="supplier-header">
                        <div class="supplier-avatar">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="supplier-info">
                            <h4>${supplier.name}</h4>
                            <div class="supplier-rating">
                                <i class="fas fa-star"></i>
                                ${supplier.rating} (${supplier.reviews} reviews)
                            </div>
                            <div class="supplier-specialties">
                                ${specialtiesHTML}
                            </div>
                        </div>
                    </div>
                    <div class="supplier-stats">
                        <span><i class="fas fa-clock"></i> ${supplier.responseTime} avg response</span>
                        <span>${supplier.products.length} products</span>
                    </div>
                `;
                
                suppliersGrid.appendChild(supplierCard);
            });
        }

        function setQuickFilter(filter) {
            currentFilter = filter;
            
            // Update active filter
            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadSuppliers(filter);
        }

        function handleGlobalSearch() {
            const searchTerm = document.getElementById('globalSearch').value.toLowerCase();
            
            if (searchTerm.length === 0) {
                loadSuppliers(currentFilter);
                return;
            }
            
            const filteredSuppliers = allSuppliers.filter(supplier => {
                const nameMatch = supplier.name.toLowerCase().includes(searchTerm);
                const specialtyMatch = supplier.specialties.some(spec => 
                    spec.toLowerCase().includes(searchTerm)
                );
                const productMatch = supplier.products.some(product =>
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.category.toLowerCase().includes(searchTerm)
                );
                
                return nameMatch || specialtyMatch || productMatch;
            });
            
            displaySearchResults(filteredSuppliers);
        }

        function displaySearchResults(suppliers) {
            const suppliersGrid = document.getElementById('suppliersGrid');
            const emptyState = document.getElementById('emptyState');
            
            if (suppliers.length === 0) {
                suppliersGrid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }
            
            suppliersGrid.style.display = 'grid';
            emptyState.style.display = 'none';
            suppliersGrid.innerHTML = '';
            
            suppliers.forEach(supplier => {
                const supplierCard = document.createElement('div');
                supplierCard.className = 'supplier-card';
                supplierCard.onclick = () => selectSupplier(supplier.id);
                
                const specialtiesHTML = supplier.specialties.map(spec => 
                    `<span class="specialty-tag">${spec}</span>`
                ).join('');
                
                supplierCard.innerHTML = `
                    ${supplier.subscription === 'premium' ? '<div class="supplier-badge premium">PREMIUM</div>' : ''}
                    <div class="supplier-header">
                        <div class="supplier-avatar">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="supplier-info">
                            <h4>${supplier.name}</h4>
                            <div class="supplier-rating">
                                <i class="fas fa-star"></i>
                                ${supplier.rating} (${supplier.reviews} reviews)
                            </div>
                            <div class="supplier-specialties">
                                ${specialtiesHTML}
                            </div>
                        </div>
                    </div>
                    <div class="supplier-stats">
                        <span><i class="fas fa-clock"></i> ${supplier.responseTime} avg response</span>
                        <span>${supplier.products.length} products</span>
                    </div>
                `;
                
                suppliersGrid.appendChild(supplierCard);
            });
        }

        function selectSupplier(supplierId) {
            selectedSupplier = supplierId;
            const supplier = suppliers[supplierId];
            
            // Update UI
            document.querySelectorAll('.supplier-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            // Show products section
            document.getElementById('productsSection').style.display = 'block';
            
            // Update supplier info
            document.getElementById('selectedSupplierName').textContent = `${supplier.name} - Products`;
            document.getElementById('supplierSpecialties').textContent = 
                `Specializes in: ${supplier.specialties.join(', ')}`;
            
            // Load products
            loadProducts(supplierId);
            
            // Scroll to products section
            document.getElementById('productsSection').scrollIntoView({ behavior: 'smooth' });
        }

        function loadProducts(supplierId) {
            const supplier = suppliers[supplierId];
            const productsGrid = document.getElementById('productsGrid');
            const categoryFilters = document.getElementById('categoryFilters');
            
            // Get unique categories
            const categories = [...new Set(supplier.products.map(product => product.category))];
            
            // Load category filters
            categoryFilters.innerHTML = `
                <div class="filter-tag active" onclick="setProductFilter('all')">All Products</div>
                ${categories.map(category => 
                    `<div class="filter-tag" onclick="setProductFilter('${category}')">${category}</div>`
                ).join('')}
            `;
            
            // Load all products initially
            displayProducts(supplier.products);
        }

        function displayProducts(products) {
            const productsGrid = document.getElementById('productsGrid');
            productsGrid.innerHTML = '';
            
            products.forEach(product => {
                const stockStatus = getStockStatus(product.stock, product.minStock);
                const stockBadge = stockStatus === 'out-of-stock' ? 
                    '<div class="product-badge out-of-stock">OUT OF STOCK</div>' :
                    stockStatus === 'low-stock' ? 
                    '<div class="product-badge low-stock">LOW STOCK</div>' : '';
                
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    ${stockBadge}
                    <h4>${product.name}</h4>
                    <div class="product-category">${product.category}</div>
                    <div class="product-price">KES ${product.price}/${product.unit}</div>
                    <div class="stock-info">
                        <i class="fas fa-box"></i> ${product.stock} in stock
                        ${stockStatus === 'low-stock' ? ' • ⚠️ Low stock alert' : ''}
                    </div>
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="decreaseQuantity(${product.id})">-</button>
                        <input type="number" id="qty-${product.id}" class="quantity-input" value="0" min="0" onchange="updateQuantity(${product.id})">
                        <button class="quantity-btn" onclick="increaseQuantity(${product.id})">+</button>
                    </div>
                    <button class="btn btn-outline btn-small add-to-cart-btn" onclick="addToCart(${product.id})" 
                            ${stockStatus === 'out-of-stock' ? 'disabled' : ''}>
                        <i class="fas fa-cart-plus"></i> 
                        ${stockStatus === 'out-of-stock' ? 'Out of Stock' : 'Add to Cart'}
                    </button>
                `;
                productsGrid.appendChild(productCard);
            });
        }

        function setProductFilter(category) {
            const supplier = suppliers[selectedSupplier];
            let filteredProducts = supplier.products;
            
            if (category !== 'all') {
                filteredProducts = supplier.products.filter(product => product.category === category);
            }
            
            // Update active filter
            document.querySelectorAll('#categoryFilters .filter-tag').forEach(tag => {
                tag.classList.remove('active');
            });
            event.target.classList.add('active');
            
            displayProducts(filteredProducts);
        }

        function filterProducts() {
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const supplier = suppliers[selectedSupplier];
            
            let filteredProducts = supplier.products;
            
            if (searchTerm) {
                filteredProducts = supplier.products.filter(product => 
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.category.toLowerCase().includes(searchTerm)
                );
            }
            
            displayProducts(filteredProducts);
        }

        function getStockStatus(stock, minStock) {
            if (stock === 0) return 'out-of-stock';
            if (stock <= minStock) return 'low-stock';
            return 'in-stock';
        }

        // Cart functions (same as before, but optimized)
        function increaseQuantity(productId) {
            const input = document.getElementById(`qty-${productId}`);
            input.value = parseInt(input.value) + 1;
        }

        function decreaseQuantity(productId) {
            const input = document.getElementById(`qty-${productId}`);
            if (parseInt(input.value) > 0) {
                input.value = parseInt(input.value) - 1;
            }
        }

        function updateQuantity(productId) {
            const input = document.getElementById(`qty-${productId}`);
            if (parseInt(input.value) < 0) {
                input.value = 0;
            }
        }

        function addToCart(productId) {
            const supplier = suppliers[selectedSupplier];
            const product = supplier.products.find(p => p.id === productId);
            const quantity = parseInt(document.getElementById(`qty-${productId}`).value);
            
            if (quantity <= 0) {
                alert('Please enter a quantity greater than 0');
                return;
            }
            
            if (product.stock < quantity) {
                alert(`Only ${product.stock} items available in stock`);
                return;
            }
            
            // Check if product already in cart
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    id: productId,
                    name: product.name,
                    price: product.price,
                    unit: product.unit,
                    quantity: quantity
                });
            }
            
            updateCartDisplay();
            document.getElementById(`qty-${productId}`).value = 0;
        }

        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            const totalAmount = document.getElementById('totalAmount');
            const generateQuoteBtn = document.getElementById('generateQuoteBtn');
            const placeOrderBtn = document.getElementById('placeOrderBtn');
            
            cartItems.innerHTML = '';
            let total = 0;
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p style="color: #64748B; text-align: center;">No items in cart</p>';
                generateQuoteBtn.disabled = true;
                placeOrderBtn.disabled = true;
            } else {
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
                        <div class="cart-item-info">
                            <h5>${item.name}</h5>
                            <div class="cart-item-details">
                                ${item.quantity} ${item.unit} × KES ${item.price}
                            </div>
                        </div>
                        <div class="cart-item-actions">
                            <strong>KES ${itemTotal.toLocaleString()}</strong>
                            <button class="btn-icon" onclick="removeFromCart(${item.id})">
                                <i class="fas fa-trash" style="color: #ef4444;"></i>
                            </button>
                        </div>
                    `;
                    cartItems.appendChild(cartItem);
                });
                
                generateQuoteBtn.disabled = false;
                placeOrderBtn.disabled = false;
            }
            
            totalAmount.textContent = `KES ${total.toLocaleString()}`;
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartDisplay();
        }

        // Quote and PO functions (same as before)
        function generateQuote() {
            // Implementation same as previous version
        }

        function placeOrder() {
            // Implementation same as previous version
        }
    </script>
</body>
</html>
<!-- In hotel-ordering.html and other hotel pages -->
<nav class="navbar">
    <div class="nav-container">
        <div class="nav-logo">
            <a href="hotel-dashboard.html" style="display: flex; align-items: center; text-decoration: none;">
                <img src="swisto-logo.png" alt="SWISTO Kenya">
                <span style="margin-left: 10px; font-weight: 600; color: #333;">Hotel Portal</span>
            </a>
        </div>
        <!-- Rest of navigation remains the same -->
    </div>
</nav>
